<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>MindFULL - Mindful Eating Coach</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .pb-safe { padding-bottom: env(safe-area-inset-bottom, 20px); }
        
        .glassmorphism {
            background: rgba(255, 255, 255, 0.25);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.18);
        }
        
        .glassmorphism-dark {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(15px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .glassmorphism-white {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(15px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .nature-gradient {
            background: linear-gradient(135deg, #74b9ff 0%, #0984e3 25%, #00b894 50%, #00cec9 75%, #6c5ce7 100%);
        }
        
        .blue-gradient {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        
        .green-gradient {
            background: linear-gradient(135deg, #a8e6cf 0%, #88d8c0 25%, #78c2ad 50%, #689f99 75%, #5d8a8a 100%);
        }
        
        .warm-gradient {
            background: linear-gradient(135deg, #fd79a8 0%, #e84393 25%, #a29bfe 50%, #74b9ff 75%, #0984e3 100%);
        }
        
        .purple-gradient {
            background: linear-gradient(135deg, #a29bfe 0%, #6c5ce7 25%, #fd79a8 50%, #fdcb6e 75%, #e17055 100%);
        }
        
        .sunset-gradient {
            background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 25%, #fecfef 50%, #ff9a9e 75%, #f093fb 100%);
        }
        
        .orange-dream-gradient {
            background: linear-gradient(135deg, #e17055 0%, #d63031 25%, #b33939 50%, #e17055 75%, #d68910 100%);
        }
        
        .text-shadow {
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        }
        
        .glassmorphism-stronger {
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .card-hover {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .card-hover:hover {
            transform: translateY(-2px);
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
        }
        
        .floating-button {
            position: fixed;
            bottom: 90px;
            right: 20px;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: linear-gradient(135deg, #ff7675, #fd79a8);
            box-shadow: 0 10px 25px rgba(255, 118, 117, 0.4);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            cursor: pointer;
            z-index: 50;
            transition: all 0.3s ease;
            border: none;
        }
        
        .floating-button:hover {
            transform: scale(1.1);
            box-shadow: 0 15px 35px rgba(255, 118, 117, 0.6);
        }
        
        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 100%;
            max-width: 448px;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border-top: 1px solid rgba(255, 255, 255, 0.2);
            padding: 12px 0 calc(12px + env(safe-area-inset-bottom, 0px));
            z-index: 40;
        }
        
        .page-transition {
            animation: slideIn 0.3s ease-out;
        }
        
        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateX(20px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }
        
        .scale-animation {
            animation: scaleIn 0.2s ease-out;
        }
        
        @keyframes scaleIn {
            from {
                transform: scale(0.95);
                opacity: 0;
            }
            to {
                transform: scale(1);
                opacity: 1;
            }
        }
        
        .pulse-animation {
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% {
                opacity: 1;
            }
            50% {
                opacity: 0.7;
            }
        }
        
        .intensity-slider, .hunger-slider {
            -webkit-appearance: none;
            width: 100%;
            height: 8px;
            border-radius: 5px;
            outline: none;
        }
        
        .intensity-slider {
            background: linear-gradient(to right, #ffeaa7 0%, #fdcb6e 25%, #e17055 50%, #d63031 75%, #b2bec3 100%);
        }
        
        .hunger-slider {
            background: linear-gradient(to right, #00b894 0%, #00cec9 15%, #74b9ff 30%, #0984e3 45%, #fdcb6e 60%, #e17055 75%, #d63031 100%);
        }
        
        .intensity-slider::-webkit-slider-thumb, .hunger-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: white;
            border: 4px solid #fd79a8;
            cursor: pointer;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }
        
        .chart-bar {
            transition: all 0.3s ease;
            border-radius: 4px 4px 0 0;
        }
        
        .progress-bar {
            transition: width 0.3s ease;
        }
        
        .journal-entry {
            transition: all 0.2s ease;
        }
        
        .journal-entry:hover {
            background-color: #f8fafc;
            transform: translateX(4px);
        }
        
        .glow-on-hover {
            transition: all 0.3s ease;
        }
        
        .glow-on-hover:hover {
            box-shadow: 0 0 20px rgba(255, 154, 86, 0.3), 0 10px 25px rgba(0, 0, 0, 0.1);
        }
    </style>
</head>
<body class="bg-gray-50">
    <div id="root"></div>
    
    <script type="text/babel">
        const { useState, useEffect } = React;

        // SVG Icon Components
        const HomeIcon = ({ className = "w-6 h-6" }) => (
            <svg className={className} fill="currentColor" viewBox="0 0 20 20">
                <path d="M10.707 2.293a1 1 0 00-1.414 0l-7 7a1 1 0 001.414 1.414L4 10.414V17a1 1 0 001 1h2a1 1 0 001-1v-2a1 1 0 011-1h2a1 1 0 011 1v2a1 1 0 001 1h2a1 1 0 001-1v-6.586l.293.293a1 1 0 001.414-1.414l-7-7z"/>
            </svg>
        );
        
        const JournalIcon = ({ className = "w-6 h-6" }) => (
            <svg className={className} fill="currentColor" viewBox="0 0 20 20">
                <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"/>
                <path fillRule="evenodd" d="M4 5a2 2 0 012-2v1a1 1 0 102 0V3h4v1a1 1 0 102 0V3a2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm8 5a1 1 0 100-2 1 1 0 000 2z"/>
            </svg>
        );
        
        const InsightsIcon = ({ className = "w-6 h-6" }) => (
            <svg className={className} fill="currentColor" viewBox="0 0 20 20">
                <path d="M2 10a8 8 0 018-8v8h8a8 8 0 11-16 0z"/>
                <path d="M12 2.252A8.014 8.014 0 0117.748 8H12V2.252z"/>
            </svg>
        );
        
        const HeartIcon = ({ className = "w-6 h-6" }) => (
            <svg className={className} fill="currentColor" viewBox="0 0 20 20">
                <path fillRule="evenodd" d="M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z"/>
            </svg>
        );
        
        const ClockIcon = ({ className = "w-6 h-6" }) => (
            <svg className={className} fill="currentColor" viewBox="0 0 20 20">
                <path fillRule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z"/>
            </svg>
        );
        
        const AlertIcon = ({ className = "w-6 h-6" }) => (
            <svg className={className} fill="currentColor" viewBox="0 0 20 20">
                <path fillRule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z"/>
            </svg>
        );
        
        const CheckIcon = ({ className = "w-6 h-6" }) => (
            <svg className={className} fill="currentColor" viewBox="0 0 20 20">
                <path fillRule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z"/>
            </svg>
        );
        
        const LightbulbIcon = ({ className = "w-6 h-6" }) => (
            <svg className={className} fill="currentColor" viewBox="0 0 20 20">
                <path d="M11 3a1 1 0 10-2 0v1a1 1 0 102 0V3zM15.657 5.757a1 1 0 00-1.414-1.414l-.707.707a1 1 0 001.414 1.414l.707-.707zM18 10a1 1 0 01-1 1h-1a1 1 0 110-2h1a1 1 0 011 1zM5.05 6.464A1 1 0 106.464 5.05l-.707-.707a1 1 0 00-1.414 1.414l.707.707zM5 10a1 1 0 01-1 1H3a1 1 0 110-2h1a1 1 0 011 1zM8 16v-1h4v1a2 2 0 11-4 0zM12 14c.015-.34.208-.646.477-.859a4 4 0 10-4.954 0c.27.213.462.519.477.859h4z"/>
            </svg>
        );
        
        const PlusIcon = ({ className = "w-6 h-6" }) => (
            <svg className={className} fill="currentColor" viewBox="0 0 20 20">
                <path fillRule="evenodd" d="M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z"/>
            </svg>
        );
        
        const ArrowLeftIcon = ({ className = "w-6 h-6" }) => (
            <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M15 19l-7-7 7-7"/>
            </svg>
        );
        
        const PenIcon = ({ className = "w-6 h-6" }) => (
            <svg className={className} fill="currentColor" viewBox="0 0 20 20">
                <path d="M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z"/>
            </svg>
        );
        
        const SearchIcon = ({ className = "w-6 h-6" }) => (
            <svg className={className} fill="currentColor" viewBox="0 0 20 20">
                <path fillRule="evenodd" d="M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z"/>
            </svg>
        );

        const PlayIcon = ({ className = "w-6 h-6" }) => (
            <svg className={className} fill="currentColor" viewBox="0 0 20 20">
                <path fillRule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z"/>
            </svg>
        );

        const MindfulEatingCoach = () => {
            const [currentView, setCurrentView] = useState('home');
            const [hungerLevel, setHungerLevel] = useState(4);
            const [isEating, setIsEating] = useState(false);
            const [eatingStartTime, setEatingStartTime] = useState(null);
            const [currentQuestion, setCurrentQuestion] = useState(0);
            const [eatingResponses, setEatingResponses] = useState([]);
            const [currentResponse, setCurrentResponse] = useState('');
            const [eatingNote, setEatingNote] = useState('');
            const [cravingLog, setCravingLog] = useState([]);
            const [journalEntries, setJournalEntries] = useState([]);
            const [currentJournalEntry, setCurrentJournalEntry] = useState({
                id: null,
                title: '',
                content: '',
                mood: '',
                timestamp: null
            });
            const [journalSearchTerm, setJournalSearchTerm] = useState('');
            const [currentCravingData, setCurrentCravingData] = useState({
                timestamp: null,
                food: '',
                emotions: [],
                intensity: 3,
                triggers: [],
                triggerNotes: '',
                outcome: ''
            });
            const [showQuickActions, setShowQuickActions] = useState(false);

            // Data and constants
            const distractionActivities = [
                "Take 5 deep breaths",
                "Drink a glass of water",
                "Go for a 2-minute walk",
                "Listen to your favorite song",
                "Do 10 jumping jacks",
                "Text a friend",
                "Write in a journal",
                "Do a quick stretch",
                "Look out the window",
                "Practice gratitude - think of 3 things you're thankful for",
                "Organize your desk or a small space",
                "Take a few photos of something beautiful nearby"
            ];

            const mindfulEatingPrompts = [
                {
                    text: "Take a moment to look at your food. Notice the colors, textures, and presentation.",
                    responseType: "observation",
                    placeholder: "What do you notice about your food?"
                },
                {
                    text: "Take your first bite slowly. Chew thoroughly and notice the flavors.",
                    responseType: "taste",
                    placeholder: "How does it taste? What flavors do you notice?"
                },
                {
                    text: "Put your utensils down between bites. How are you feeling?",
                    responseType: "feeling",
                    placeholder: "How are you feeling right now?"
                },
                {
                    text: "Check in with your hunger level now. Are you still hungry?",
                    responseType: "hunger",
                    options: ["Very hungry", "Moderately hungry", "Slightly hungry", "Not hungry", "Getting full"]
                },
                {
                    text: "Notice how your body feels. Are you getting satisfied?",
                    responseType: "satisfaction",
                    options: ["Still very hungry", "Still hungry", "Starting to feel satisfied", "Feeling satisfied", "Getting full"]
                },
                {
                    text: "Take a sip of water. How does your body feel now?",
                    responseType: "body",
                    placeholder: "How does your body feel after the water?"
                },
                {
                    text: "You're doing great! Keep eating slowly and mindfully.",
                    responseType: "reflection",
                    placeholder: "How is this mindful eating experience going for you?"
                },
                {
                    text: "Final check: How satisfied do you feel right now?",
                    responseType: "final",
                    options: ["Still hungry", "Slightly satisfied", "Comfortably satisfied", "Very satisfied", "Too full"]
                }
            ];

            const cravingQuestions = [
                {
                    question: "What are you craving specifically?",
                    type: "food",
                    options: ["Something sweet (candy, dessert)", "Something salty/crunchy (chips, crackers)", "Something creamy/rich (ice cream, cheese)", "Comfort food (pizza, pasta)", "Caffeinated drinks (coffee, energy drinks)", "A full meal"],
                    insight: "Specific cravings often reveal emotional needs rather than hunger."
                },
                {
                    question: "How intense is this craving right now?",
                    type: "intensity", 
                    useSlider: true,
                    insight: "Intense cravings are more likely to be emotional rather than physical."
                },
                {
                    question: "What emotions are you feeling right now?",
                    type: "emotions",
                    multiSelect: true,
                    options: ["Stressed", "Anxious", "Bored", "Sad", "Lonely", "Tired", "Frustrated", "Happy", "Excited", "Overwhelmed", "Angry", "Procrastinating", "Neutral"],
                    insight: "Identifying emotions helps recognize patterns in emotional eating."
                },
                {
                    question: "When did you last eat a full meal?",
                    type: "timing",
                    options: ["Less than 2 hours ago", "2-3 hours ago", "3-4 hours ago", "4-6 hours ago", "More than 6 hours ago"],
                    insight: "If it's been more than 3-4 hours, this might be real hunger!"
                },
                {
                    question: "What might have triggered this craving?",
                    type: "triggers",
                    multiSelect: true,
                    options: ["Saw food/ad", "Smelled food", "Work stress", "Relationship issue", "Fatigue", "Habit/routine", "Social situation", "Physical discomfort", "Procrastination", "Celebration/reward", "Nothing specific"],
                    insight: "Understanding triggers helps you prepare for and manage future cravings."
                }
            ];

            const moodOptions = ["😊 Happy", "😌 Calm", "🤔 Thoughtful", "😟 Anxious", "😢 Sad", "😴 Tired", "🔥 Energized", "😠 Frustrated", "🥰 Grateful", "😐 Neutral"];

            // Utility functions
            const getGreeting = () => {
                const hour = new Date().getHours();
                if (hour < 6) return 'Good night';
                if (hour < 12) return 'Good morning';
                if (hour < 17) return 'Good afternoon';
                if (hour < 21) return 'Good evening';
                return 'Good night';
            };

            const getUserName = () => {
                return 'there';
            };

            const getRandomActivities = () => {
                return distractionActivities
                    .sort(() => Math.random() - 0.5)
                    .slice(0, 4);
            };

            const getTimeOfDay = (date) => {
                const hour = date.getHours();
                if (hour < 6) return 'Late Night';
                if (hour < 12) return 'Morning';
                if (hour < 17) return 'Afternoon';
                if (hour < 21) return 'Evening';
                return 'Night';
            };

            const getHungerLabel = (level) => {
                const labels = {
                    1: { 
                        label: "Not hungry at all",
                        sensation: "Comfortable and satisfied, no thoughts of food, stomach feels neutral"
                    },
                    2: { 
                        label: "Slightly hungry",
                        sensation: "First gentle awareness of stomach, could eat but don't need to yet"
                    },
                    3: { 
                        label: "Moderately hungry",
                        sensation: "Clear but comfortable hunger signals, stomach feels empty, ready to eat"
                    },
                    4: { 
                        label: "Hungry",
                        sensation: "Noticeable hunger pangs, stomach growling, actively thinking about food"
                    },
                    5: { 
                        label: "Very hungry",
                        sensation: "Strong hunger signals, difficulty concentrating, stomach feels quite empty"
                    },
                    6: { 
                        label: "Extremely hungry",
                        sensation: "Intense hunger, feeling irritable or shaky, urgent need for food"
                    },
                    7: { 
                        label: "Starving",
                        sensation: "Overwhelming hunger, lightheaded, hands may be trembling, can't focus on anything else"
                    }
                };
                return labels[level] || labels[4];
            };

            // Analytics functions
            const getCravingsByTimeOfDay = () => {
                const timeGroups = {};
                cravingLog.forEach(entry => {
                    const timeOfDay = getTimeOfDay(new Date(entry.timestamp));
                    if (!timeGroups[timeOfDay]) {
                        timeGroups[timeOfDay] = [];
                    }
                    timeGroups[timeOfDay].push(entry);
                });
                return timeGroups;
            };

            const getDailyCravingCounts = () => {
                const counts = {};
                const today = new Date();
                
                for (let i = 6; i >= 0; i--) {
                    const date = new Date(today);
                    date.setDate(date.getDate() - i);
                    const dateStr = date.toDateString();
                    counts[dateStr] = 0;
                }
                
                cravingLog.forEach(entry => {
                    const entryDate = new Date(entry.timestamp);
                    const dateStr = entryDate.toDateString();
                    if (counts.hasOwnProperty(dateStr)) {
                        counts[dateStr]++;
                    }
                });
                
                return counts;
            };

            const getIntensityDistribution = () => {
                const distribution = { 1: 0, 2: 0, 3: 0, 4: 0, 5: 0 };
                cravingLog.forEach(entry => {
                    const intensity = entry.intensity || 3;
                    if (intensity >= 1 && intensity <= 5) {
                        distribution[intensity]++;
                    }
                });
                return distribution;
            };

            const getMostCommonTriggers = () => {
                const triggerCounts = {};
                cravingLog.forEach(entry => {
                    entry.triggers?.forEach(trigger => {
                        triggerCounts[trigger] = (triggerCounts[trigger] || 0) + 1;
                    });
                });
                return Object.entries(triggerCounts)
                    .sort(([,a], [,b]) => b - a)
                    .slice(0, 5);
            };

            const getSuccessRate = () => {
                if (cravingLog.length === 0) return 0;
                const successfulOutcomes = ['tried_distraction', 'recognized_real_hunger'];
                const successful = cravingLog.filter(entry => 
                    successfulOutcomes.includes(entry.outcome)
                ).length;
                return Math.round((successful / cravingLog.length) * 100);
            };

            const getCurrentStreak = () => {
                if (cravingLog.length === 0) return 0;
                const sortedLog = [...cravingLog].sort((a, b) => new Date(b.timestamp) - new Date(a.timestamp));
                let streak = 0;
                const successfulOutcomes = ['tried_distraction', 'recognized_real_hunger'];
                
                for (const entry of sortedLog) {
                    if (successfulOutcomes.includes(entry.outcome)) {
                        streak++;
                    } else {
                        break;
                    }
                }
                return streak;
            };

            const getSmartInsight = () => {
                if (cravingLog.length < 3) return null;
                
                const insights = [];
                const triggerCounts = getMostCommonTriggers();
                const timeGroups = getCravingsByTimeOfDay();
                
                // Most common trigger insight
                if (triggerCounts.length > 0) {
                    const topTrigger = triggerCounts[0][0];
                    insights.push(`Your most common trigger is "${topTrigger}". Consider preparing alternative responses for these situations.`);
                }
                
                // Time-based insight
                const maxTimeGroup = Object.entries(timeGroups).reduce((a, b) => 
                    a[1].length > b[1].length ? a : b
                );
                if (maxTimeGroup[1].length >= 2) {
                    insights.push(`You tend to have more cravings in the ${maxTimeGroup[0].toLowerCase()}. Try scheduling a healthy snack or activity during this time.`);
                }
                
                // Intensity insight
                const intensityDist = getIntensityDistribution();
                const highIntensity = intensityDist[4] + intensityDist[5];
                const total = Object.values(intensityDist).reduce((a, b) => a + b, 0);
                if (highIntensity / total > 0.6) {
                    insights.push("Many of your cravings are high intensity. Try the 10-minute rule: wait 10 minutes before acting on strong cravings.");
                }
                
                return insights[Math.floor(Math.random() * insights.length)];
            };

            // Journal functions
            const saveJournalEntry = () => {
                if (!currentJournalEntry.title.trim() && !currentJournalEntry.content.trim()) return;
                
                const entry = {
                    ...currentJournalEntry,
                    id: currentJournalEntry.id || Date.now(),
                    timestamp: currentJournalEntry.timestamp || new Date()
                };
                
                if (currentJournalEntry.id) {
                    setJournalEntries(prev => 
                        prev.map(e => e.id === entry.id ? entry : e)
                    );
                } else {
                    setJournalEntries(prev => [entry, ...prev]);
                }
                
                setCurrentJournalEntry({
                    id: null,
                    title: '',
                    content: '',
                    mood: '',
                    timestamp: null
                });
                
                setCurrentView('journal');
            };

            const editJournalEntry = (entry) => {
                setCurrentJournalEntry(entry);
                setCurrentView('journalEntry');
            };

            const deleteJournalEntry = (entryId) => {
                setJournalEntries(prev => prev.filter(e => e.id !== entryId));
            };

            const getFilteredJournalEntries = () => {
                if (!journalSearchTerm.trim()) return journalEntries;
                
                const searchLower = journalSearchTerm.toLowerCase();
                return journalEntries.filter(entry => 
                    entry.title.toLowerCase().includes(searchLower) ||
                    entry.content.toLowerCase().includes(searchLower) ||
                    entry.mood.toLowerCase().includes(searchLower)
                );
            };

            // Action handlers
            const handleHungerCheck = (level) => {
                if (level <= 2) {
                    setCurrentView('wait');
                    setTimeout(() => {
                        setCurrentView('home');
                    }, 5000);
                } else {
                    setCurrentView('readyToEat');
                }
            };

            const startEating = () => {
                setIsEating(true);
                setEatingStartTime(Date.now());
                setCurrentView('eating');
                setCurrentQuestion(0);
                setEatingResponses([]);
                setCurrentResponse('');
            };

            const nextEatingPrompt = () => {
                if (currentResponse.trim() || eatingResponses[currentQuestion]) {
                    const newResponses = [...eatingResponses];
                    newResponses[currentQuestion] = currentResponse || eatingResponses[currentQuestion];
                    setEatingResponses(newResponses);
                }
                
                setCurrentResponse('');
                
                if (currentQuestion < mindfulEatingPrompts.length - 1) {
                    setCurrentQuestion(currentQuestion + 1);
                } else {
                    setCurrentView('eatingComplete');
                }
            };

            const previousEatingPrompt = () => {
                if (currentQuestion > 0) {
                    setCurrentQuestion(currentQuestion - 1);
                    setCurrentResponse(eatingResponses[currentQuestion - 1] || '');
                }
            };

            const handleResponseSelect = (response) => {
                setCurrentResponse(response);
                const newResponses = [...eatingResponses];
                newResponses[currentQuestion] = response;
                setEatingResponses(newResponses);
            };

            const startCravingCheck = () => {
                setCurrentView('cravingCheck');
                setCurrentQuestion(0);
                setCurrentCravingData({
                    timestamp: new Date(),
                    food: '',
                    emotions: [],
                    intensity: 3,
                    triggers: [],
                    triggerNotes: '',
                    outcome: ''
                });
            };

            const nextCravingQuestion = (selectedOption = null) => {
                if (selectedOption) {
                    const questionType = cravingQuestions[currentQuestion].type;
                    const updatedData = { ...currentCravingData };
                    
                    if (cravingQuestions[currentQuestion].multiSelect) {
                        if (!updatedData[questionType].includes(selectedOption)) {
                            updatedData[questionType] = [...updatedData[questionType], selectedOption];
                        }
                    } else {
                        updatedData[questionType] = selectedOption;
                    }
                    
                    setCurrentCravingData(updatedData);
                }
                
                if (currentQuestion < cravingQuestions.length - 1) {
                    setCurrentQuestion(currentQuestion + 1);
                } else {
                    setCurrentView('cravingResult');
                }
            };

            const previousCravingQuestion = () => {
                if (currentQuestion > 0) {
                    setCurrentQuestion(currentQuestion - 1);
                } else {
                    setCurrentView('home');
                }
            };

            const navigateToView = (view) => {
                setCurrentView(view);
            };

            // Component renders
            const BottomNav = () => (
                <div className="bottom-nav">
                    <div className="flex justify-around items-center px-6">
                        <button 
                            onClick={() => navigateToView('home')}
                            className={`flex flex-col items-center py-2 transition-colors ${
                                currentView === 'home' ? 'text-blue-600' : 'text-gray-400'
                            }`}
                        >
                            <HomeIcon className="w-6 h-6" />
                            <span className="text-xs mt-1 font-medium">Home</span>
                        </button>
                        
                        <button 
                            onClick={() => navigateToView('journal')}
                            className={`flex flex-col items-center py-2 transition-colors ${
                                ['journal', 'journalEntry'].includes(currentView) ? 'text-blue-600' : 'text-gray-400'
                            }`}
                        >
                            <JournalIcon className="w-6 h-6" />
                            <span className="text-xs mt-1 font-medium">Journal</span>
                        </button>
                        
                        <button 
                            onClick={() => navigateToView('insights')}
                            className={`flex flex-col items-center py-2 transition-colors ${
                                ['insights', 'cravingCheck', 'cravingResult'].includes(currentView) ? 'text-blue-600' : 'text-gray-400'
                            }`}
                        >
                            <InsightsIcon className="w-6 h-6" />
                            <span className="text-xs mt-1 font-medium">Insights</span>
                        </button>
                    </div>
                </div>
            );

            const FloatingButton = () => (
                <button 
                    onClick={startCravingCheck}
                    className="floating-button scale-animation"
                    title="Quick craving check"
                >
                    <PlusIcon className="w-6 h-6" />
                </button>
            );

            const HomeView = () => (
                <div className="min-h-screen page-transition">
                    <div className="nature-gradient px-6 pt-12 pb-8">
                        <div className="text-center text-white">
                            <div className="w-20 h-20 glassmorphism-dark rounded-full mx-auto mb-4 flex items-center justify-center">
                                <HeartIcon className="w-10 h-10 text-white" />
                            </div>
                            <h1 className="text-3xl font-bold mb-1">MindFULL</h1>
                            <h2 className="text-xl font-medium mb-2">{getGreeting()}, {getUserName()}</h2>
                            <p className="text-white text-opacity-80">How are you feeling today?</p>
                        </div>

                        {/* Quick Stats */}
                        {cravingLog.length > 0 && (
                            <div className="glassmorphism rounded-2xl p-4 mt-6">
                                <div className="grid grid-cols-3 gap-4 text-center text-white">
                                    <div>
                                        <div className="text-2xl font-bold">{getCurrentStreak()}</div>
                                        <div className="text-xs opacity-80">Current streak</div>
                                    </div>
                                    <div>
                                        <div className="text-2xl font-bold">{getSuccessRate()}%</div>
                                        <div className="text-xs opacity-80">Success rate</div>
                                    </div>
                                    <div>
                                        <div className="text-2xl font-bold">{cravingLog.length}</div>
                                        <div className="text-xs opacity-80">Total tracked</div>
                                    </div>
                                </div>
                            </div>
                        )}
                    </div>

                    <div className="px-6 py-6 space-y-4">
                        {/* Smart Insight */}
                        {getSmartInsight() && (
                            <div className="bg-gradient-to-r from-purple-500 to-pink-500 rounded-2xl p-4 text-white card-hover">
                                <div className="flex items-start">
                                    <div className="w-10 h-10 bg-white bg-opacity-20 rounded-full mr-3 flex items-center justify-center flex-shrink-0">
                                        <LightbulbIcon className="w-5 h-5" />
                                    </div>
                                    <div>
                                        <div className="text-sm font-semibold mb-1">Smart Insight</div>
                                        <div className="text-sm opacity-90">{getSmartInsight()}</div>
                                    </div>
                                </div>
                            </div>
                        )}

                        {/* Action Cards */}
                        <div className="space-y-3">
                            <button
                                onClick={() => setCurrentView('hungerCheck')}
                                className="w-full bg-white rounded-xl p-4 shadow-lg card-hover flex items-center"
                            >
                                <div className="w-12 h-12 bg-blue-500 rounded-full mr-4 flex items-center justify-center">
                                    <ClockIcon className="w-6 h-6 text-white" />
                                </div>
                                <div className="text-left">
                                    <div className="font-semibold text-gray-800">Check My Hunger</div>
                                    <div className="text-sm text-gray-600">Tune into your body signals</div>
                                </div>
                            </button>

                            <button
                                onClick={() => {
                                    setIsEating(true);
                                    setEatingStartTime(Date.now());
                                    setCurrentView('eating');
                                    setCurrentQuestion(0);
                                    setEatingResponses([]);
                                    setCurrentResponse('');
                                }}
                                className="w-full bg-white rounded-xl p-4 shadow-lg card-hover flex items-center"
                            >
                                <div className="w-12 h-12 bg-green-500 rounded-full mr-4 flex items-center justify-center">
                                    <HeartIcon className="w-6 h-6 text-white" />
                                </div>
                                <div className="text-left">
                                    <div className="font-semibold text-gray-800">Start Mindful Eating</div>
                                    <div className="text-sm text-gray-600">Begin a guided eating session</div>
                                </div>
                            </button>

                            <button
                                onClick={startCravingCheck}
                                className="w-full bg-white rounded-xl p-4 shadow-lg card-hover flex items-center"
                            >
                                <div className="w-12 h-12 bg-orange-500 rounded-full mr-4 flex items-center justify-center">
                                    <AlertIcon className="w-6 h-6 text-white" />
                                </div>
                                <div className="text-left">
                                    <div className="font-semibold text-gray-800">Having a Craving?</div>
                                    <div className="text-sm text-gray-600">Let's explore it together</div>
                                </div>
                            </button>

                            <button
                                onClick={() => setCurrentView('insights')}
                                className="w-full bg-white rounded-xl p-4 shadow-lg card-hover flex items-center"
                            >
                                <div className="w-12 h-12 bg-indigo-500 rounded-full mr-4 flex items-center justify-center">
                                    <InsightsIcon className="w-6 h-6 text-white" />
                                </div>
                                <div className="text-left">
                                    <div className="font-semibold text-gray-800">View My Patterns</div>
                                    <div className="text-sm text-gray-600">Discover your insights</div>
                                </div>
                            </button>
                        </div>
                    </div>

                    <div className="pb-20"></div>
                    <BottomNav />
                    <FloatingButton />
                </div>
            );

            const HungerCheckView = () => (
                <div className="min-h-screen page-transition">
                    <div className="blue-gradient px-6 pt-12 pb-8">
                        <div className="flex items-center justify-between mb-6">
                            <button 
                                onClick={() => setCurrentView('home')}
                                className="w-10 h-10 glassmorphism-dark rounded-full flex items-center justify-center"
                            >
                                <ArrowLeftIcon className="w-5 h-5 text-white" />
                            </button>
                            <h2 className="text-xl font-bold text-white">Hunger Check</h2>
                            <div className="w-10 h-10"></div>
                        </div>

                        <div className="text-center text-white mb-8">
                            <div className="w-20 h-20 glassmorphism-dark rounded-full mx-auto mb-4 flex items-center justify-center">
                                <ClockIcon className="w-10 h-10 text-white" />
                            </div>
                            <h3 className="text-2xl font-bold mb-2">How hungry are you?</h3>
                            <p className="text-white text-opacity-80">Use the slider to rate your hunger</p>
                        </div>

                        <div className="glassmorphism-stronger rounded-2xl p-6 mb-6">
                            <div className="text-center mb-6">
                                <div className="text-4xl font-bold text-white mb-2 text-shadow">
                                    {hungerLevel}
                                </div>
                                <div className="text-lg text-white opacity-90 mb-3 text-shadow">
                                    {getHungerLabel(hungerLevel).label}
                                </div>
                                <div className="text-sm text-white opacity-80 text-shadow bg-white bg-opacity-10 rounded-lg p-3">
                                    {getHungerLabel(hungerLevel).sensation}
                                </div>
                            </div>
                            
                            <input
                                type="range"
                                min="1"
                                max="7"
                                value={hungerLevel}
                                onChange={(e) => setHungerLevel(parseInt(e.target.value))}
                                className="hunger-slider w-full mb-4"
                            />
                            
                            <div className="flex justify-between text-xs text-white opacity-70">
                                <span>Not hungry</span>
                                <span>Starving</span>
                            </div>
                        </div>

                        <div className="glassmorphism rounded-xl p-4 mb-6">
                            <h4 className="font-semibold text-white mb-2 flex items-center">
                                <LightbulbIcon className="w-4 h-4 mr-2" />
                                Tips for Evaluating Hunger
                            </h4>
                            <ul className="text-sm text-white opacity-90 space-y-1">
                                <li>• Notice physical sensations in your stomach</li>
                                <li>• Ask: "Would plain food sound good right now?"</li>
                                <li>• Check if you feel low energy or lightheaded</li>
                                <li>• Consider when you last ate a substantial meal</li>
                                <li>• Distinguish between hunger and thirst</li>
                            </ul>
                        </div>

                        <button
                            onClick={() => handleHungerCheck(hungerLevel)}
                            className="w-full glassmorphism-white text-gray-800 font-semibold py-4 px-6 rounded-xl shadow-lg transition-all card-hover"
                        >
                            Continue with Level {hungerLevel}
                        </button>
                    </div>
                    
                    <div className="pb-20"></div>
                    <BottomNav />
                </div>
            );

            const WaitView = () => (
                <div className="min-h-screen page-transition">
                    <div className="blue-gradient flex items-center justify-center min-h-screen px-6">
                        <div className="text-center">
                            <div className="w-24 h-24 glassmorphism-dark rounded-full mx-auto mb-6 flex items-center justify-center pulse-animation">
                                <ClockIcon className="w-12 h-12 text-white" />
                            </div>
                            <h2 className="text-2xl font-bold text-white mb-4">Not quite hungry yet!</h2>
                            <p className="text-white text-opacity-80 mb-6">
                                Since you're at a {hungerLevel} on the hunger scale, let's wait a bit longer.
                            </p>
                            <div className="glassmorphism rounded-xl p-4">
                                <p className="text-sm text-white opacity-90">
                                    Try having a glass of water and check back in 30-60 minutes.
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            );

            const ReadyToEatView = () => (
                <div className="min-h-screen page-transition">
                    <div className="green-gradient flex items-center justify-center min-h-screen px-6">
                        <div className="text-center">
                            <div className="w-24 h-24 glassmorphism-dark rounded-full mx-auto mb-6 flex items-center justify-center scale-animation">
                                <CheckIcon className="w-12 h-12 text-white" />
                            </div>
                            <h2 className="text-2xl font-bold text-white mb-4">You're hungry!</h2>
                            <p className="text-white text-opacity-80 mb-8">
                                Your hunger level is {hungerLevel}. Are you ready to eat mindfully?
                            </p>
                            
                            <div className="space-y-4">
                                <button
                                    onClick={startEating}
                                    className="w-full glassmorphism-white text-gray-800 font-semibold py-4 px-6 rounded-xl shadow-lg transition-all card-hover"
                                >
                                    Yes, start mindful eating
                                </button>
                                
                                <button
                                    onClick={() => {
                                        setCurrentView('home');
                                    }}
                                    className="w-full bg-white bg-opacity-20 hover:bg-opacity-30 text-white font-semibold py-4 px-6 rounded-xl shadow-lg transition-all card-hover border border-white border-opacity-30"
                                >
                                    Not yet, remind me later
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            );

            const EatingView = () => (
                <div className="min-h-screen page-transition">
                    <div className="green-gradient px-6 pt-12 pb-8">
                        <div className="text-center mb-8">
                            <div className="w-16 h-16 mx-auto glassmorphism-dark rounded-full flex items-center justify-center mb-4">
                                <HeartIcon className="w-8 h-8 text-white" />
                            </div>
                            <div className="text-sm text-white opacity-80 mb-2">
                                Step {currentQuestion + 1} of {mindfulEatingPrompts.length}
                            </div>
                            
                            {/* Progress Bar */}
                            <div className="w-full bg-white bg-opacity-20 rounded-full h-2 mb-4">
                                <div 
                                    className="bg-white h-2 rounded-full progress-bar"
                                    style={{ width: `${((currentQuestion + 1) / mindfulEatingPrompts.length) * 100}%` }}
                                ></div>
                            </div>
                        </div>

                        <div className="glassmorphism rounded-2xl p-6 mb-6">
                            <p className="text-white text-lg leading-relaxed mb-4">
                                {mindfulEatingPrompts[currentQuestion].text}
                            </p>
                            
                            {mindfulEatingPrompts[currentQuestion].options ? (
                                <div className="space-y-3">
                                    {mindfulEatingPrompts[currentQuestion].options.map((option, index) => (
                                        <button
                                            key={index}
                                            onClick={() => handleResponseSelect(option)}
                                            className={`w-full p-3 text-left rounded-lg border-2 transition-all card-hover ${
                                                currentResponse === option || eatingResponses[currentQuestion] === option
                                                    ? 'border-white bg-white bg-opacity-20 text-white'
                                                    : 'border-white border-opacity-30 bg-white bg-opacity-10 hover:bg-opacity-20 text-white'
                                            }`}
                                        >
                                            {option}
                                        </button>
                                    ))}
                                </div>
                            ) : (
                                <div>
                                    <textarea
                                        value={currentResponse}
                                        onChange={(e) => setCurrentResponse(e.target.value)}
                                        placeholder={mindfulEatingPrompts[currentQuestion].placeholder}
                                        className="w-full p-4 border border-white border-opacity-30 rounded-lg resize-none focus:outline-none focus:ring-2 focus:ring-white text-base bg-white bg-opacity-10 text-white placeholder-white placeholder-opacity-70"
                                        rows={4}
                                    />
                                </div>
                            )}
                        </div>

                        <div className="grid grid-cols-2 gap-4">
                            <button
                                onClick={previousEatingPrompt}
                                disabled={currentQuestion === 0}
                                className={`font-semibold py-3 px-6 rounded-xl shadow-lg transition-all ${
                                    currentQuestion === 0 
                                        ? 'bg-white bg-opacity-10 text-white opacity-50 cursor-not-allowed'
                                        : 'bg-white bg-opacity-20 hover:bg-opacity-30 text-white card-hover border border-white border-opacity-30'
                                }`}
                            >
                                Back
                            </button>
                            
                            <button
                                onClick={nextEatingPrompt}
                                className="glassmorphism-white text-gray-800 font-semibold py-3 px-6 rounded-xl shadow-lg transition-all card-hover"
                            >
                                {currentQuestion < mindfulEatingPrompts.length - 1 ? 'Next' : 'Finish'}
                            </button>
                        </div>
                    </div>
                    
                    <div className="pb-20"></div>
                    <BottomNav />
                </div>
            );

            const EatingCompleteView = () => (
                <div className="min-h-screen page-transition">
                    <div className="green-gradient px-6 pt-12 pb-8">
                        <div className="text-center mb-8">
                            <div className="w-24 h-24 glassmorphism-dark rounded-full mx-auto mb-6 flex items-center justify-center scale-animation">
                                <CheckIcon className="w-12 h-12 text-white" />
                            </div>
                            <h2 className="text-2xl font-bold text-white mb-2">Great job!</h2>
                            <p className="text-white text-opacity-80">How was your mindful eating experience?</p>
                        </div>
                        
                        <div className="glassmorphism rounded-2xl p-6 mb-6">
                            <textarea
                                value={eatingNote}
                                onChange={(e) => setEatingNote(e.target.value)}
                                placeholder="How did this eating experience feel? What did you notice about your hunger, satisfaction, or the food itself?"
                                className="w-full p-4 border border-white border-opacity-30 rounded-lg resize-none focus:outline-none focus:ring-2 focus:ring-white text-base bg-white bg-opacity-10 text-white placeholder-white placeholder-opacity-70"
                                rows={5}
                            />
                        </div>

                        <button
                            onClick={() => {
                                setCurrentView('home');
                                setIsEating(false);
                                setEatingStartTime(null);
                                setEatingResponses([]);
                                setCurrentResponse('');
                                setCurrentQuestion(0);
                                setEatingNote('');
                            }}
                            className="w-full glassmorphism-white text-gray-800 font-semibold py-4 px-6 rounded-xl shadow-lg transition-all card-hover"
                        >
                            Save & Return Home
                        </button>
                    </div>
                    
                    <div className="pb-20"></div>
                    <BottomNav />
                </div>
            );

            const CravingCheckView = () => (
                <div className="min-h-screen page-transition">
                    <div className="orange-dream-gradient px-6 pt-12 pb-8">
                        <div className="flex items-center justify-between mb-6">
                            <button 
                                onClick={previousCravingQuestion}
                                className="w-10 h-10 glassmorphism-dark rounded-full flex items-center justify-center"
                            >
                                <ArrowLeftIcon className="w-5 h-5 text-white" />
                            </button>
                            <div className="text-center">
                                <div className="text-sm text-white opacity-80 mb-1 text-shadow">Question {currentQuestion + 1} of {cravingQuestions.length}</div>
                                <div className="w-24 h-1 bg-white bg-opacity-20 rounded-full mx-auto">
                                    <div 
                                        className="h-1 bg-white rounded-full progress-bar"
                                        style={{ width: `${((currentQuestion + 1) / cravingQuestions.length) * 100}%` }}
                                    ></div>
                                </div>
                            </div>
                            <div className="w-10 h-10"></div>
                        </div>

                        <div className="text-center mb-8">
                            <div className="w-20 h-20 glassmorphism-stronger rounded-full mx-auto mb-4 flex items-center justify-center">
                                <AlertIcon className="w-10 h-10 text-white" />
                            </div>
                            <h2 className="text-2xl font-bold text-white mb-2 text-shadow">
                                {cravingQuestions[currentQuestion].question}
                            </h2>
                        </div>

                        <div className="glassmorphism-stronger rounded-2xl p-6 mb-6">
                            {cravingQuestions[currentQuestion].useSlider ? (
                                <div className="space-y-6">
                                    <div className="text-center">
                                        <div className="text-4xl font-bold text-white mb-2 text-shadow">
                                            {currentCravingData.intensity}
                                        </div>
                                        <div className="text-sm text-white opacity-80 text-shadow">
                                            {currentCravingData.intensity === 1 ? 'Mild' :
                                            currentCravingData.intensity === 2 ? 'Moderate' :
                                            currentCravingData.intensity === 3 ? 'Strong' :
                                            currentCravingData.intensity === 4 ? 'Very Strong' : 'Overwhelming'}
                                        </div>
                                    </div>
                                    
                                    <input
                                        type="range"
                                        min="1"
                                        max="5"
                                        value={currentCravingData.intensity}
                                        onChange={(e) => setCurrentCravingData({
                                            ...currentCravingData,
                                            intensity: parseInt(e.target.value)
                                        })}
                                        className="intensity-slider w-full"
                                    />
                                    
                                    <div className="flex justify-between text-xs text-white opacity-70">
                                        <span>Mild</span>
                                        <span>Overwhelming</span>
                                    </div>
                                </div>
                            ) : (
                                <div className="space-y-3">
                                    {cravingQuestions[currentQuestion].options.map((option, index) => {
                                        const isSelected = cravingQuestions[currentQuestion].multiSelect 
                                            ? currentCravingData[cravingQuestions[currentQuestion].type]?.includes(option)
                                            : currentCravingData[cravingQuestions[currentQuestion].type] === option;
                                            
                                        return (
                                            <button
                                                key={index}
                                                onClick={() => {
                                                    if (cravingQuestions[currentQuestion].multiSelect) {
                                                        const questionType = cravingQuestions[currentQuestion].type;
                                                        const updatedData = { ...currentCravingData };
                                                        
                                                        if (isSelected) {
                                                            updatedData[questionType] = updatedData[questionType].filter(item => item !== option);
                                                        } else {
                                                            updatedData[questionType] = [...(updatedData[questionType] || []), option];
                                                        }
                                                        
                                                        setCurrentCravingData(updatedData);
                                                    } else {
                                                        nextCravingQuestion(option);
                                                    }
                                                }}
                                                className={`w-full p-3 text-left rounded-lg border-2 transition-all card-hover glow-on-hover ${
                                                    isSelected
                                                        ? 'border-white bg-white bg-opacity-20 text-white'
                                                        : 'border-white border-opacity-30 bg-white bg-opacity-10 hover:bg-opacity-20 text-white'
                                                }`}
                                            >
                                                <div className="flex items-center justify-between">
                                                    <span className="text-sm">{option}</span>
                                                    {isSelected && <CheckIcon className="w-5 h-5 text-white" />}
                                                </div>
                                            </button>
                                        );
                                    })}
                                </div>
                            )}
                            
                            {cravingQuestions[currentQuestion].type === 'triggers' && (
                                <div className="mt-4">
                                    <textarea
                                        value={currentCravingData.triggerNotes || ''}
                                        onChange={(e) => setCurrentCravingData({
                                            ...currentCravingData,
                                            triggerNotes: e.target.value
                                        })}
                                        placeholder="Any other triggers or details about what might have caused this craving?"
                                        className="w-full p-3 border border-white border-opacity-30 rounded-lg resize-none focus:outline-none focus:ring-2 focus:ring-white text-base bg-white bg-opacity-10 text-white placeholder-white placeholder-opacity-70"
                                        rows={3}
                                    />
                                </div>
                            )}
                        </div>

                        <div className="glassmorphism-stronger rounded-xl p-4 mb-6">
                            <div className="flex items-start">
                                <LightbulbIcon className="w-5 h-5 text-white mr-2 flex-shrink-0 mt-0.5" />
                                <p className="text-sm text-white opacity-90 text-shadow">
                                    {cravingQuestions[currentQuestion].insight}
                                </p>
                            </div>
                        </div>

                        <div className="space-y-3">
                            {(cravingQuestions[currentQuestion].multiSelect || cravingQuestions[currentQuestion].useSlider) && (
                                <button
                                    onClick={() => nextCravingQuestion()}
                                    className="w-full glassmorphism-white text-gray-800 font-semibold py-4 px-6 rounded-xl shadow-lg transition-all card-hover"
                                >
                                    Continue
                                </button>
                            )}
                            
                            <button
                                onClick={() => {
                                    const newCravingEntry = {
                                        ...currentCravingData,
                                        outcome: 'completed_assessment'
                                    };
                                    setCravingLog(prev => [...prev, newCravingEntry]);
                                    setCurrentView('cravingResult');
                                }}
                                className="w-full bg-white bg-opacity-20 hover:bg-opacity-30 text-white font-semibold py-3 px-6 rounded-xl transition-all card-hover border border-white border-opacity-30"
                            >
                                Skip to Results
                            </button>
                        </div>
                    </div>
                    
                    <div className="pb-20"></div>
                    <BottomNav />
                </div>
            );

            const CravingResultView = () => {
                const logCraving = (outcome) => {
                    const newCravingEntry = {
                        ...currentCravingData,
                        outcome: outcome
                    };
                    setCravingLog(prev => [...prev, newCravingEntry]);
                };

                const isLikelyRealHunger = () => {
                    const isFullMeal = currentCravingData.food === "A full meal";
                    const isNeutralEmotion = currentCravingData.emotions?.includes("Neutral");
                    const isLongSinceEating = currentCravingData.timing === "3-4 hours ago" || 
                                            currentCravingData.timing === "4-6 hours ago" || 
                                            currentCravingData.timing === "More than 6 hours ago";
                    
                    return isFullMeal && isNeutralEmotion && isLongSinceEating;
                };

                const showRealHungerMessage = isLikelyRealHunger();

                return (
                    <div className="min-h-screen page-transition">
                        <div className="sunset-gradient px-6 pt-12 pb-8">
                            <div className="text-center mb-8">
                                <div className="w-24 h-24 glassmorphism-stronger rounded-full mx-auto mb-6 flex items-center justify-center scale-animation">
                                    <LightbulbIcon className="w-12 h-12 text-white" />
                                </div>
                                <h2 className="text-2xl font-bold text-white text-shadow">Craving Analysis</h2>
                            </div>
                            
                            <div className="glassmorphism-stronger rounded-2xl p-6 shadow-lg mb-6">
                                <h3 className="text-lg font-semibold text-white mb-4 text-shadow">Your Craving Profile</h3>
                                <div className="space-y-3 text-sm">
                                    <div className="flex justify-between">
                                        <span className="font-medium text-white opacity-70 text-shadow">Craving:</span>
                                        <span className="text-white text-shadow">{currentCravingData.food}</span>
                                    </div>
                                    <div className="flex justify-between">
                                        <span className="font-medium text-white opacity-70 text-shadow">Intensity:</span>
                                        <span className="text-white text-shadow">{currentCravingData.intensity}/5</span>
                                    </div>
                                    {currentCravingData.emotions?.length > 0 && (
                                        <div className="flex justify-between">
                                            <span className="font-medium text-white opacity-70 text-shadow">Emotions:</span>
                                            <span className="text-white text-shadow">{currentCravingData.emotions.join(', ')}</span>
                                        </div>
                                    )}
                                    {currentCravingData.timing && (
                                        <div className="flex justify-between">
                                            <span className="font-medium text-white opacity-70 text-shadow">Last meal:</span>
                                            <span className="text-white text-shadow">{currentCravingData.timing}</span>
                                        </div>
                                    )}
                                    {currentCravingData.triggers?.length > 0 && (
                                        <div className="flex justify-between">
                                            <span className="font-medium text-white opacity-70 text-shadow">Triggers:</span>
                                            <span className="text-white text-shadow">{currentCravingData.triggers.join(', ')}</span>
                                        </div>
                                    )}
                                </div>
                            </div>

                            {showRealHungerMessage ? (
                                <div className="glassmorphism-stronger rounded-xl p-4 mb-6">
                                    <div className="flex items-start">
                                        <CheckIcon className="w-6 h-6 text-green-300 mr-3 flex-shrink-0" />
                                        <div>
                                            <h4 className="font-semibold text-white mb-1 text-shadow">This looks like real hunger!</h4>
                                            <p className="text-sm text-white opacity-90 text-shadow">
                                                You're craving a full meal, feeling emotionally neutral, and it's been a while since you last ate.
                                            </p>
                                        </div>
                                    </div>
                                </div>
                            ) : (
                                <div className="glassmorphism-stronger rounded-xl p-4 mb-6">
                                    <div className="flex items-start">
                                        <AlertIcon className="w-6 h-6 text-blue-300 mr-3 flex-shrink-0" />
                                        <div>
                                            <h4 className="font-semibold text-white mb-1 text-shadow">This seems like emotional eating</h4>
                                            <p className="text-sm text-white opacity-90 text-shadow">
                                                Based on your responses, this might be more about emotions than physical hunger.
                                            </p>
                                        </div>
                                    </div>
                                </div>
                            )}

                            {!showRealHungerMessage && (
                                <div className="glassmorphism-stronger rounded-xl p-4 shadow-lg mb-6">
                                    <h4 className="font-semibold text-white mb-3 text-shadow">Try one of these instead:</h4>
                                    <div className="space-y-2">
                                        {getRandomActivities().map((activity, index) => (
                                            <div key={index} className="flex items-center p-2 bg-white bg-opacity-10 rounded-lg">
                                                <CheckIcon className="w-4 h-4 text-green-300 mr-3 flex-shrink-0" />
                                                <span className="text-sm text-white text-shadow">{activity}</span>
                                            </div>
                                        ))}
                                    </div>
                                </div>
                            )}

                            <div className="space-y-3">
                                {showRealHungerMessage ? (
                                    <button
                                        onClick={() => {
                                            logCraving('recognized_real_hunger');
                                            setCurrentView('hungerCheck');
                                        }}
                                        className="w-full glassmorphism-white text-gray-800 font-semibold py-4 px-6 rounded-xl shadow-lg transition-all card-hover"
                                    >
                                        Check my hunger level and eat
                                    </button>
                                ) : (
                                    <button
                                        onClick={() => {
                                            logCraving('tried_distraction');
                                            setCurrentView('home');
                                        }}
                                        className="w-full glassmorphism-white text-gray-800 font-semibold py-4 px-6 rounded-xl shadow-lg transition-all card-hover"
                                    >
                                        I'll try these activities
                                    </button>
                                )}
                                
                                <button
                                    onClick={() => {
                                        logCraving('chose_to_eat');
                                        setCurrentView('hungerCheck');
                                    }}
                                    className="w-full bg-white bg-opacity-20 hover:bg-opacity-30 text-white font-semibold py-4 px-6 rounded-xl shadow-lg transition-all card-hover border border-white border-opacity-30"
                                >
                                    Actually, let me check my hunger level
                                </button>
                            </div>
                        </div>
                        
                        <div className="pb-20"></div>
                        <BottomNav />
                    </div>
                );
            };

            const JournalView = () => (
                <div className="min-h-screen page-transition">
                    <div className="purple-gradient px-6 pt-12 pb-8">
                        <div className="text-center text-white mb-6">
                            <div className="w-20 h-20 glassmorphism-dark rounded-full mx-auto mb-4 flex items-center justify-center">
                                <JournalIcon className="w-10 h-10 text-white" />
                            </div>
                            <h2 className="text-2xl font-bold">Food Journal</h2>
                            <p className="text-white text-opacity-80">Reflect on your eating experiences</p>
                        </div>

                        <button
                            onClick={() => {
                                setCurrentJournalEntry({
                                    id: null,
                                    title: '',
                                    content: '',
                                    mood: '',
                                    timestamp: null
                                });
                                setCurrentView('journalEntry');
                            }}
                            className="w-full glassmorphism-white text-gray-800 font-semibold py-4 px-6 rounded-xl shadow-lg transition-all card-hover flex items-center justify-center mb-6"
                        >
                            <PenIcon className="w-5 h-5 mr-2" />
                            New Journal Entry
                        </button>

                        {journalEntries.length > 0 && (
                            <div className="glassmorphism rounded-xl p-4">
                                <div className="relative mb-4">
                                    <SearchIcon className="w-4 h-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-white opacity-70" />
                                    <input
                                        type="text"
                                        placeholder="Search your entries..."
                                        value={journalSearchTerm}
                                        onChange={(e) => setJournalSearchTerm(e.target.value)}
                                        className="w-full pl-10 pr-4 py-2 bg-white bg-opacity-20 border border-white border-opacity-30 rounded-lg text-white placeholder-white placeholder-opacity-70 focus:outline-none focus:ring-2 focus:ring-white"
                                    />
                                </div>
                            </div>
                        )}
                    </div>

                    <div className="px-6 py-6">
                        {journalEntries.length === 0 ? (
                            <div className="bg-white rounded-xl p-8 shadow-lg text-center">
                                <div className="w-16 h-16 bg-purple-100 rounded-full mx-auto mb-4 flex items-center justify-center">
                                    <JournalIcon className="w-8 h-8 text-purple-600" />
                                </div>
                                <h3 className="text-lg font-semibold text-gray-800 mb-2">Start Your Journey</h3>
                                <p className="text-gray-600 mb-4">Write your first journal entry to track your mindful eating experiences.</p>
                                <button
                                    onClick={() => {
                                        setCurrentJournalEntry({
                                            id: null,
                                            title: '',
                                            content: '',
                                            mood: '',
                                            timestamp: null
                                        });
                                        setCurrentView('journalEntry');
                                    }}
                                    className="bg-purple-500 hover:bg-purple-600 text-white font-semibold py-3 px-6 rounded-xl transition-all card-hover"
                                >
                                    Write First Entry
                                </button>
                            </div>
                        ) : (
                            <div className="space-y-4">
                                {getFilteredJournalEntries().map((entry) => (
                                    <div key={entry.id} className="bg-white rounded-xl p-4 shadow-lg journal-entry">
                                        <div className="flex justify-between items-start mb-2">
                                            <div className="flex-1">
                                                <h3 className="font-semibold text-gray-800 text-lg">{entry.title || 'Untitled Entry'}</h3>
                                                <div className="flex items-center text-sm text-gray-500 mt-1">
                                                    <span>{new Date(entry.timestamp).toLocaleDateString()}</span>
                                                    {entry.mood && (
                                                        <>
                                                            <span className="mx-2">•</span>
                                                            <span>{entry.mood}</span>
                                                        </>
                                                    )}
                                                </div>
                                            </div>
                                            <button
                                                onClick={() => editJournalEntry(entry)}
                                                className="ml-4 text-gray-400 hover:text-gray-600 transition-colors"
                                            >
                                                <PenIcon className="w-4 h-4" />
                                            </button>
                                        </div>
                                        <p className="text-gray-600 text-sm line-clamp-3">
                                            {entry.content.length > 150 
                                                ? entry.content.substring(0, 150) + '...' 
                                                : entry.content}
                                        </p>
                                    </div>
                                ))}
                            </div>
                        )}
                    </div>
                    
                    <div className="pb-20"></div>
                    <BottomNav />
                    <FloatingButton />
                </div>
            );

            const JournalEntryView = () => (
                <div className="min-h-screen page-transition">
                    <div className="purple-gradient px-6 pt-12 pb-8">
                        <div className="flex items-center justify-between mb-6">
                            <button 
                                onClick={() => setCurrentView('journal')}
                                className="w-10 h-10 glassmorphism-dark rounded-full flex items-center justify-center"
                            >
                                <ArrowLeftIcon className="w-5 h-5 text-white" />
                            </button>
                            <h2 className="text-xl font-bold text-white">Journal Entry</h2>
                            <button
                                onClick={saveJournalEntry}
                                className="text-white font-semibold text-sm opacity-90 hover:opacity-100"
                            >
                                Save
                            </button>
                        </div>

                        <div className="glassmorphism rounded-xl p-6 space-y-4">
                            <input
                                type="text"
                                placeholder="Entry title..."
                                value={currentJournalEntry.title}
                                onChange={(e) => setCurrentJournalEntry({
                                    ...currentJournalEntry,
                                    title: e.target.value
                                })}
                                className="w-full p-3 bg-white bg-opacity-20 border border-white border-opacity-30 rounded-lg text-white placeholder-white placeholder-opacity-70 focus:outline-none focus:ring-2 focus:ring-white font-semibold text-lg"
                            />

                            <div>
                                <label className="block text-white text-sm font-medium mb-2 opacity-90">How are you feeling?</label>
                                <div className="grid grid-cols-2 gap-2">
                                    {moodOptions.map((mood) => (
                                        <button
                                            key={mood}
                                            onClick={() => setCurrentJournalEntry({
                                                ...currentJournalEntry,
                                                mood: mood
                                            })}
                                            className={`p-2 rounded-lg text-sm transition-all ${
                                                currentJournalEntry.mood === mood
                                                    ? 'bg-white bg-opacity-30 text-white border-2 border-white'
                                                    : 'bg-white bg-opacity-10 text-white opacity-70 hover:opacity-100 border-2 border-transparent'
                                            }`}
                                        >
                                            {mood}
                                        </button>
                                    ))}
                                </div>
                            </div>

                            <textarea
                                placeholder="What happened today? How did your meals make you feel? What are you grateful for?"
                                value={currentJournalEntry.content}
                                onChange={(e) => setCurrentJournalEntry({
                                    ...currentJournalEntry,
                                    content: e.target.value
                                })}
                                className="w-full p-4 bg-white bg-opacity-20 border border-white border-opacity-30 rounded-lg text-white placeholder-white placeholder-opacity-70 focus:outline-none focus:ring-2 focus:ring-white resize-none"
                                rows={8}
                            />
                        </div>

                        <div className="flex gap-4 mt-6">
                            <button
                                onClick={() => setCurrentView('journal')}
                                className="flex-1 bg-white bg-opacity-20 hover:bg-opacity-30 text-white font-semibold py-4 px-6 rounded-xl shadow-lg transition-all card-hover border border-white border-opacity-30"
                            >
                                Cancel
                            </button>
                            <button
                                onClick={saveJournalEntry}
                                className="flex-1 glassmorphism-white text-gray-800 font-semibold py-4 px-6 rounded-xl shadow-lg transition-all card-hover"
                            >
                                Save Entry
                            </button>
                        </div>

                        {currentJournalEntry.id && (
                            <button
                                onClick={() => {
                                    deleteJournalEntry(currentJournalEntry.id);
                                    setCurrentView('journal');
                                }}
                                className="w-full mt-4 bg-red-500 bg-opacity-20 hover:bg-opacity-30 text-white font-semibold py-3 px-6 rounded-xl transition-all card-hover border border-red-300 border-opacity-30"
                            >
                                Delete Entry
                            </button>
                        )}
                    </div>
                    
                    <div className="pb-20"></div>
                    <BottomNav />
                </div>
            );

            const InsightsView = () => {
                const dailyCounts = getDailyCravingCounts();
                const intensityDist = getIntensityDistribution();
                const timeGroups = getCravingsByTimeOfDay();
                const topTriggers = getMostCommonTriggers();
                const successRate = getSuccessRate();
                const currentStreak = getCurrentStreak();

                return (
                    <div className="min-h-screen bg-gray-50 page-transition">
                        <div className="px-6 pt-12 pb-6">
                            <div className="text-center mb-8">
                                <div className="w-20 h-20 bg-indigo-100 rounded-full mx-auto mb-4 flex items-center justify-center">
                                    <InsightsIcon className="w-10 h-10 text-indigo-600" />
                                </div>
                                <h2 className="text-2xl font-bold text-gray-800">Your Insights</h2>
                                <p className="text-gray-600">Discover your patterns and progress</p>
                            </div>

                            {/* Quick Actions Section */}
                            <div className="bg-white rounded-xl p-4 shadow-lg mb-6">
                                <h3 className="text-lg font-semibold text-gray-800 mb-4 flex items-center">
                                    <PlayIcon className="w-5 h-5 mr-2 text-indigo-600" />
                                    Quick Actions
                                </h3>
                                <div className="grid grid-cols-2 gap-3">
                                    <button
                                        onClick={startCravingCheck}
                                        className="bg-orange-500 hover:bg-orange-600 text-white p-3 rounded-lg font-medium text-sm transition-all card-hover flex items-center justify-center"
                                    >
                                        <AlertIcon className="w-4 h-4 mr-2" />
                                        Track Craving
                                    </button>
                                    <button
                                        onClick={() => setCurrentView('hungerCheck')}
                                        className="bg-blue-500 hover:bg-blue-600 text-white p-3 rounded-lg font-medium text-sm transition-all card-hover flex items-center justify-center"
                                    >
                                        <ClockIcon className="w-4 h-4 mr-2" />
                                        Check Hunger
                                    </button>
                                </div>
                            </div>

                            {/* Recent Activity */}
                            {cravingLog.length > 0 && (
                                <div className="bg-white rounded-xl p-4 shadow-lg mb-6">
                                    <h3 className="text-lg font-semibold text-gray-800 mb-4">Recent Activity</h3>
                                    <div className="space-y-3 max-h-48 overflow-y-auto">
                                        {cravingLog.slice(-5).reverse().map((entry, index) => {
                                            const date = new Date(entry.timestamp);
                                            const timeOfDay = getTimeOfDay(date);
                                            
                                            return (
                                                <div key={index} className="bg-gray-50 rounded-lg p-3 border border-gray-100">
                                                    <div className="flex justify-between items-start mb-2">
                                                        <div className="flex-1">
                                                            <p className="font-medium text-gray-800 text-sm">{entry.food}</p>
                                                            <p className="text-xs text-gray-500">
                                                                {date.toLocaleDateString()} • {timeOfDay}
                                                            </p>
                                                        </div>
                                                        <div className={`w-3 h-3 rounded-full ${
                                                            ['tried_distraction', 'recognized_real_hunger'].includes(entry.outcome) 
                                                                ? 'bg-green-400' : 'bg-orange-400'
                                                        }`}></div>
                                                    </div>
                                                </div>
                                            );
                                        })}
                                    </div>
                                </div>
                            )}

                            {cravingLog.length === 0 ? (
                                <div className="bg-white rounded-xl p-8 shadow-lg text-center">
                                    <div className="w-16 h-16 bg-gray-100 rounded-full mx-auto mb-4 flex items-center justify-center">
                                        <InsightsIcon className="w-8 h-8 text-gray-400" />
                                    </div>
                                    <h3 className="text-lg font-semibold text-gray-800 mb-2">No data yet</h3>
                                    <p className="text-gray-600 mb-4">Complete a few craving assessments to see your personalized insights and patterns.</p>
                                    <button
                                        onClick={startCravingCheck}
                                        className="bg-indigo-500 hover:bg-indigo-600 text-white font-semibold py-3 px-6 rounded-xl transition-all card-hover"
                                    >
                                        Start Your First Assessment
                                    </button>
                                </div>
                            ) : (
                                <div className="space-y-6">
                                    {/* Smart Insight */}
                                    {getSmartInsight() && (
                                        <div className="bg-gradient-to-r from-purple-500 to-pink-500 rounded-2xl p-4 text-white">
                                            <div className="flex items-start">
                                                <div className="w-10 h-10 bg-white bg-opacity-20 rounded-full mr-3 flex items-center justify-center flex-shrink-0">
                                                    <LightbulbIcon className="w-5 h-5" />
                                                </div>
                                                <div>
                                                    <div className="text-sm font-semibold mb-1">Smart Insight</div>
                                                    <div className="text-sm opacity-90">{getSmartInsight()}</div>
                                                </div>
                                            </div>
                                        </div>
                                    )}

                                    {/* Progress Overview */}
                                    <div className="bg-white rounded-xl p-6 shadow-lg">
                                        <h3 className="text-lg font-semibold text-gray-800 mb-4">Progress Overview</h3>
                                        <div className="grid grid-cols-3 gap-4 text-center">
                                            <div>
                                                <div className="text-2xl font-bold text-indigo-600">{currentStreak}</div>
                                                <div className="text-xs text-gray-600">Current streak</div>
                                            </div>
                                            <div>
                                                <div className="text-2xl font-bold text-green-600">{successRate}%</div>
                                                <div className="text-xs text-gray-600">Success rate</div>
                                            </div>
                                            <div>
                                                <div className="text-2xl font-bold text-blue-600">{cravingLog.length}</div>
                                                <div className="text-xs text-gray-600">Total tracked</div>
                                            </div>
                                        </div>
                                    </div>

                                    {/* Weekly Progress */}
                                    <div className="bg-white rounded-xl p-6 shadow-lg">
                                        <h3 className="text-lg font-semibold text-gray-800 mb-4">Weekly Cravings</h3>
                                        <div className="space-y-3">
                                            {Object.entries(dailyCounts).map(([dateStr, count]) => {
                                                const date = new Date(dateStr);
                                                const isToday = date.toDateString() === new Date().toDateString();
                                                const dayName = isToday ? 'Today' : date.toLocaleDateString('en', { weekday: 'short', month: 'short', day: 'numeric' });
                                                const maxCount = Math.max(...Object.values(dailyCounts), 1);
                                                const percentage = (count / maxCount) * 100;
                                                
                                                return (
                                                    <div key={dateStr} className="flex items-center justify-between">
                                                        <span className={`text-sm font-medium ${isToday ? 'text-indigo-700' : 'text-gray-700'}`}>
                                                            {dayName}
                                                        </span>
                                                        <div className="flex items-center">
                                                            <div className="w-24 h-2 bg-gray-200 rounded-full mr-2">
                                                                <div 
                                                                    className={`h-2 rounded-full progress-bar ${isToday ? 'bg-indigo-600' : 'bg-indigo-400'}`}
                                                                    style={{ width: `${percentage}%` }}
                                                                ></div>
                                                            </div>
                                                            <span className="text-xs text-gray-500 w-8 text-right">{count}</span>
                                                        </div>
                                                    </div>
                                                );
                                            })}
                                        </div>
                                    </div>

                                    {/* Craving Times Chart */}
                                    <div className="bg-white rounded-xl p-6 shadow-lg">
                                        <h3 className="text-lg font-semibold text-gray-800 mb-4">Craving Times</h3>
                                        <div className="h-40 flex items-end justify-between px-2">
                                            {['Morning', 'Afternoon', 'Evening', 'Night', 'Late Night'].map((timeOfDay) => {
                                                const count = timeGroups[timeOfDay]?.length || 0;
                                                const maxCount = Math.max(...Object.values(timeGroups).map(group => group?.length || 0), 1);
                                                const height = (count / maxCount) * 100;
                                                
                                                return (
                                                    <div key={timeOfDay} className="flex flex-col items-center">
                                                        <div 
                                                            className="chart-bar bg-gradient-to-t from-indigo-500 to-purple-500 w-8 mb-2"
                                                            style={{ height: `${height}%`, minHeight: count > 0 ? '8px' : '0px' }}
                                                        ></div>
                                                        <span className="text-xs text-gray-600 text-center">{timeOfDay}</span>
                                                        <span className="text-xs text-gray-400">{count}</span>
                                                    </div>
                                                );
                                            })}
                                        </div>
                                    </div>

                                    {/* Top Triggers */}
                                    {topTriggers.length > 0 && (
                                        <div className="bg-white rounded-xl p-6 shadow-lg">
                                            <h3 className="text-lg font-semibold text-gray-800 mb-4">Common Triggers</h3>
                                            <div className="space-y-3">
                                                {topTriggers.map(([trigger, count], index) => (
                                                    <div key={trigger} className="flex items-center justify-between">
                                                        <div className="flex items-center">
                                                            <div className={`w-3 h-3 rounded-full mr-3 ${
                                                                index === 0 ? 'bg-red-400' :
                                                                index === 1 ? 'bg-orange-400' :
                                                                index === 2 ? 'bg-yellow-400' :
                                                                'bg-gray-400'
                                                            }`}></div>
                                                            <span className="text-sm text-gray-700">{trigger}</span>
                                                        </div>
                                                        <span className="text-sm font-medium text-gray-600">{count}</span>
                                                    </div>
                                                ))}
                                            </div>
                                        </div>
                                    )}

                                    {/* Intensity Distribution */}
                                    <div className="bg-white rounded-xl p-6 shadow-lg">
                                        <h3 className="text-lg font-semibold text-gray-800 mb-4">Intensity Levels</h3>
                                        <div className="space-y-2">
                                            {[1, 2, 3, 4, 5].map(intensity => {
                                                const count = intensityDist[intensity];
                                                const total = Object.values(intensityDist).reduce((a, b) => a + b, 0);
                                                const percentage = total > 0 ? (count / total) * 100 : 0;
                                                
                                                return (
                                                    <div key={intensity} className="flex items-center">
                                                        <span className="text-sm text-gray-600 w-16">Level {intensity}</span>
                                                        <div className="flex-1 mx-3">
                                                            <div className="w-full bg-gray-200 rounded-full h-2">
                                                                <div 
                                                                    className={`h-2 rounded-full progress-bar ${
                                                                        intensity <= 2 ? 'bg-green-400' :
                                                                        intensity <= 3 ? 'bg-yellow-400' :
                                                                        'bg-red-400'
                                                                    }`}
                                                                    style={{ width: `${percentage}%` }}
                                                                ></div>
                                                            </div>
                                                        </div>
                                                        <span className="text-sm text-gray-500 w-8 text-right">{count}</span>
                                                    </div>
                                                );
                                            })}
                                        </div>
                                    </div>
                                </div>
                            )}
                        </div>
                        
                        <div className="pb-20"></div>
                        <BottomNav />
                        <FloatingButton />
                    </div>
                );
            };

            // Main component render
            return (
                <div className="max-w-md mx-auto bg-white min-h-screen relative">
                    {currentView === 'home' && <HomeView />}
                    {currentView === 'hungerCheck' && <HungerCheckView />}
                    {currentView === 'wait' && <WaitView />}
                    {currentView === 'readyToEat' && <ReadyToEatView />}
                    {currentView === 'eating' && <EatingView />}
                    {currentView === 'eatingComplete' && <EatingCompleteView />}
                    {currentView === 'cravingCheck' && <CravingCheckView />}
                    {currentView === 'cravingResult' && <CravingResultView />}
                    {currentView === 'journal' && <JournalView />}
                    {currentView === 'journalEntry' && <JournalEntryView />}
                    {currentView === 'insights' && <InsightsView />}
                </div>
            );
        };

        ReactDOM.render(<MindfulEatingCoach />, document.getElementById('root'));
    </script>
</body>
</html>
                
